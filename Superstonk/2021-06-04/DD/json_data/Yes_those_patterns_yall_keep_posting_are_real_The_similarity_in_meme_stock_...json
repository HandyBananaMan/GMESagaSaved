{
    "author": "squirrel_of_fortune",
    "created_utc": 1622821973.0,
    "distinguished": null,
    "edited": false,
    "id": "ns8dhk",
    "text_only": true,
    "flair_id": "7b24752e-85f9-11eb-b3c8-0e861167b641",
    "flair_text": "DD \ud83d\udc68\u200d\ud83d\udd2c",
    "name": "t3_ns8dhk",
    "num_comments": 501,
    "permalink": "/r/Superstonk/comments/ns8dhk/yes_those_patterns_yall_keep_posting_are_real_the/",
    "score": 8103,
    "selftext": "So, this post is in response to u/HomeDepotHank69 \u2018s request for DD into correlation between stock price movements.\n\n**TL/DR:**\n\n1. Two different scientific methods showing that there is similarity and correlation between certain meme stocks and that this increased since Jan.\n2. A machine learning method asked to put stonk data into clusters based on their patterns over the last half year put the meme stonks GME, AMC, KOSS, and others together regardless of which bit of price data you choose to look at. Look at the pictures!\n3. Before Jan 2020, meme stocks (as a group) were not particularly correlated with each other, after Jan they were very well correlated with each other. (In fact before Jan AMC and GME were negatively correlated, after Jan they were very closely correlated). \n4. On average, a control basket of boomer stocks have not changed in their correlation to each other. The basket of meme stonks have changed (after Jan 2021) to become highly correlated with each other (to a high statistical significance).  \n\nPearson R2 (r-squared) is a quick n dirty way to do the comparison between stonks, so I also wanted to put the data into an ML algorithm that would look for clusters in it, and see if that algorithm, knowing nothing about the situation other than the stock price and volume info, would group the stocks the same way we might by eye. \n\n**Question 1: Would a machine learning algorithm cluster the stocks into meme and boomer? As in, what general patterns exist in these stock movements?**\n\n**Question 2: Are meme stocks significantly correlated with each other? Are they correlated more than a control set of boomer stocks?** \n\nBag of meme stocks as suggested by u/HomeDepotHank69: GME, AMC, KOSS, NAKD, NOKK, BBBY, VIX\n\nControl bag of boomer stocks: AMZN, CVS, GSK, RDS-B, WEN, GM, IBM. These were selected semi-randomly to try and come from different areas of the economy. And I added Wendy\u2019s just cos. And I think I picked general motors randomly, but maybe I was primed by GME\u2019s ticker.\n\nSee picture below: normalising the daily high price to the highest price over the year to date, boomer stocks are dotted lines, meme stocks solid lines, they look different to me.\n\n&#x200B;\n\n[This is the high price, after normalisation to the higher price seen in the last year to date. I don't wanna lead you apes, but I would say that the boomer stocks \\(dashed\\) look different to the meme stocks \\(non-dashed\\). But that is not scientific enough!](https://preview.redd.it/glxb4bjuk9371.png?width=815&format=png&auto=webp&s=c3260c91c53b7919792481bd61364514a87c72fb)\n\nNext picture: after the normalisation described in the methods section below to remove the general background movement of the stock market. I did not expect KOSS to be that similar. Maybe Hank did. The numbers in this plot are large due to the normalisation, but we don't care about the exact numbers we care about the patterns here. This graph shows us that GME and its friends are doing something really fucking odd this year to date!\n\n[Normalised as described to remove the NASDAC background](https://preview.redd.it/g85bn2a6l9371.png?width=832&format=png&auto=webp&s=84af213daa4b5c9857416b8691766e128f283a2b)\n\n**Question 1. Are meme stocks similar to each other? Would they be clustered together?**\n\nWe get very similar results for the 5 dimensions of the data (high price, low price, open price, close price , adjusted close price and volume). Low and high prices results showed the largest effect. The algorithm doesn\u2019t have a great time clustering over the entire time period, but we see something interesting when we split the data into June-Dec 2020 (before) and Jan-June 2021. I think low price is the most interesting so I will use this as an example. All the data from here on is the Low price of the day, although similar things were seen with the other prices.\n\nHow to 'read' these pictures, the grey lines are the stocks over the time period, the red line is what the algorithm thinks is the middle of this cluster of stocks (sort of like a corrected average). The data is normalised for the algorithm, so the y axis is a relative price, the days are days since the start of the time period (6 june 2020 (before) or 1st Jan 2021 (after)).\n\n**Before (in 2020):**\n\n[Stonks behaving normally. Note AMC and GME are in different clusters. Cluster 1 is stocks that go down, cluster 2 is stocks that go up. This is for the June 2020 to Dec 2020](https://preview.redd.it/hfgwsop9m9371.png?width=539&format=png&auto=webp&s=2bd45d3443dcd41e46fbd395ee4a4b2aee8dfeac)\n\nThe best answer is **2** clusters: \n\nCluster 1: \\['AMC', 'NAKD', 'NOKK', 'VIX', 'CVS', 'GSK', 'RDS', 'WEN', 'IBM'\\] \n\nCluster 2: \\['GME', 'KOSS', 'BBBY', 'AMZN', 'GM'\\] \n\n**After (2021):**\n\nThe two measures gave the best answer 2 clusters and four clusters. \n\nThe two cluster answer:\n\n[Meme stonks in cluster 1, boomer stocks in cluster 2, roughly. \\(y axis is mislabelled sorry, these are low prices\\). This is Jan 2021-June 2021](https://preview.redd.it/05djchs4n9371.png?width=539&format=png&auto=webp&s=fcc287bcdf9b010c49df232ecaa990412e486c58)\n\n*2 clusters (best on one measure)*\n\nCluster 1: \\['GME', 'AMC', 'KOSS', 'NAKD', 'BBBY', 'GM'\\]\n\nCluster 2: \\['NOKK', 'VIX', 'AMZN', 'CVS', 'GSK', 'RDS', WEN, IBM\\]\n\nThe 4 cluster answer\n\n*4 clusters (best on another measure)*\n\n&#x200B;\n\n[Cluster 1. Some meme stocks and GM, peak around Jan, cluster 4, GME and AMC, doing their squeeze thing? Cluster 2 and 3, normal stocks doing normal things. \\(Again mislabelled y axis, sorry, is defo low prices\\). Jan 2021- June 2021](https://preview.redd.it/o1jdl6vcn9371.png?width=802&format=png&auto=webp&s=720b780ca6a28d6db78c354b6f3eff8c9fc59ad3)\n\n**Cluster 1: \\['KOSS', 'NAKD', 'BBBY', 'GM'\\]**\n\nCluster 2: \\['VIX', 'AMZN', 'GSK', 'RDS'\\]\n\nCluster 3: \\['NOKK', 'CVS', 'WEN', 'IBM'\\]\n\n**Cluster 4: \\['GME', 'AMC'\\]**\n\nI got the same general pattern on the high price as well. AMC GME KOSS BBBY tend to be clustered together. \n\n**Look at cluster 4's graph, isn't it pretty? And after the normalisation and all that shit (removing market background), we see that GME and AMC are higher than they were in Jan. Maybe they got a way to run?**\n\n**Conclusion 1:** \n\nThere is something similar in the meme stock price movement that causes the algorithm to put them together and this is seen across the 5 data dimensions (high price, low price etc). Looking at the four cluster answer, we see there are two different meme stock behaviors, the Jan price increase then settle for KOSS NAKD BBBY and GM (GM is following GME possibly cos of fat fingers, see later), whilst our meme stonks AMC and GME are increasing from Jan til now... \n\n**Question 2.** \n\n**Is there a statistically significant correlation between the price action of meme stocks?**\n\nSignificance: how this works: \n\nThe Pearson R2 measure (R2, should be R2 but I don't know how to superscript) is a measure of how correlated the stocks are. An R2 of +1 means an exact positive correlation (e.g. $GME goes up when $MEH goes up), an R2 of -1 means an exact negative correlation ($GME goes down when $MEH goes up), and R2 of 0 means no correlation (i.e. the two stonks are unrelated). It's not the best method to do this comparison, but it's the one we got!\n\nThe p value is a measure of significance, if it is over 0.05 then the results are considered not statistically significant at all. The **smaller** the p value is, the **more significant**. (In more statistical language, a small p value relates to a small chance that the result seen is due to random fluctuations and not a relationship between the stonks). A p value under 0.0001 is highly significant. Where I\u2019ve put p << 0.0001 I saw some TINY numbers, like a p values in the 1x10\\^{-20} region. You need to have significant results for your results to mean anything. (Any stats geeks in da house? Yes, we could discuss the difference between statistical significance and scientific significance, here, but we didn't. soz). \n\nIf we have a **large R2** there is **a correlation,** if it is backed up by **a small p number** it is a **significant correlation** and therefore we believe it is not a spurious correlation (i.e. bullshit). \n\nWe use IBM as our archetypal boomer stock as no one ever got fired for buying IBM!\n\nOK so looking at GME\u2019s price movement against other stonks before 2021:\n\n**Looking at the R2 on low and high prices BEFORE (June - Dec 2020):**\n\n**MEME to MEME**\n\nGME to AMC : R2 = -0.73, p \\~<<0.0001 (Negative CORRELATION! Very significant) (p value is 1X10\\^(-25)!)\n\nGME to KOSS : R2 = 0.55 , p <<0.0001 (middling correlation, Very significant)\n\n**MEME to Boomer** \n\nGME to IBM : R2 = -0.7, p << 0.0001 (neg correlation, very significant)\n\n**BOOMER to BOOMER**\n\nIBM to GSK \u2013 R2 = 0.94, p << 0.0001 (high correlation, highly significant\n\n**Fat fingered test**\n\nGME-GM \u2013 R2 = 0.79. p  << 0.0001 (high correlation, highly significant)\n\n&#x200B;\n\n**Looking at the R2 on low and high prices AFTER (Jan-Jun 2021):**\n\n**MEME to MEME**\n\nGME to AMC : R2 = 0.83, p << 0.0001 (positive CORRELATION! Significant)\n\nGME to KOSS : R2 = 0.77 , p << 0.0001 (positive CORRELATION, very significant)\n\n**MEME to Boomer** \n\nGME to IBM : R2 = 0.47, p << 0.0001 (positive CORRELATION, significant)\n\n**BOOMER to BOOMER**\n\nIBM to GSK : R2 = 0.62, p << 0.0001 (mid correlation, highly significant\n\n**Fat fingered test**\n\nGME to GM : R2 = 0.72. p  << 0.0001 (high correlation, highly significant)\n\n**With a p value of p << 0.0001, GME is correlated with AMC (before and after, although switches direction), KOSS (before and after), NOKK (after), BBBY (before and after).** \n\n*Fat fingers*: Humorously, there is a correlation between GME and GM, obviously people are buying the wrong ticker, so I guess my \u2018random\u2019 choice of GM was actually not that random, as I made the same mistake! N.B. GME-GM\u2019s correlation is the outlier in the boomer stock basket, but I left it in anyway. \n\n**So what have we found?** \n\n**After January the meme stocks (GME, AMC, KOSS, BBBY) became positively correlated if they weren\u2019t and the positive correlation increased.** So these stocks started to move together and only GME and KOSS were moving together before. The IBM-GSK comparison shows two different boomer stocks from the control group, they come from different industries (GSK was affected more by covid than IBM) and we see a standard sort of movement, they\u2019re both positively correlated and generally following the wider economy. \n\nAnd here\u2019s the data for all (average used is the median, error is standard error, 42 pairwise comparisons).\n\nAverage R2 of meme stock before : **-0.42 (+/- 0.09)**\n\nAverage R2 of meme stock after : **0.32 (+/- 0.05)**\n\nAverage R2 of boomer stock before  : **0.34 (+/- 0.08)**\n\nAverage R2 of boomer stock after : **0.25 (+/- 0.05)**\n\nDifference in meme stocks: **+ 0.74**, this is a huge change. \n\nDifference in boomer stocks: **-0.11,** this is small, (but is it actually significantly different from no change?)\n\nSo from this and the graphs we can see before both boomer stocks were on average not particularly correlated with each other. On average, meme stocks were weakly anti-correlated. But after, meme stocks on average move to be more positively correlated. \n\nAnother hypothesis test! Yay! My favourite thing!\n\n**Are these populations significantly different?** i.e. is the change of the r2 of these stonks before and after significant. (geek note, we use the mann whitney u test here, and I used the Hedges effect size test (thought you\u2019d like that!)). \n\n**For the meme stocks:**\n\n**Yes!** **The correlation after is GREATER with a p-value of 0.0079 (so statistically significant) and an effect size of 0.7 (a medium sized effect).** So the average change in correlation between the meme stocks is a (statistically) significant increase.\n\n**For the boomer stocks:**\n\n**No!** The correlation after is LESS with a p-value of 0.54 (so NOT statistically significant) and an effect size of 0.1 (no real effect). **So no real correlation either way**, I,e, the relationship between the boomer stocks hasn\u2019t changed over the last year to date (cos the change I found is small above enough that it could be random noise). So the average change in correlation between the boomer stocks is (statistically) insignificant.\n\n**So what\u2019s the point?** \n\n**The meme stocks have become significantly more correlated since January, and our control basket of boomer stocks have not.** I will not speculate as to why this is the case. Again, Hank asked on here for this information, so I presume he has an idea. **At the very least, it is nice to know that the similarity in the price action that everyone keeps posting is statistically significant**. I only looked at daily data (where do you get the 5 minute data?) and I expect that the GME AMC correlations on this timescale would be fun to look at, and perhaps something of a smoking gun. \n\nFinal point, correlation does not imply causation. Although I've not made any comments as to why these correlations exist. All we've got here is two different scientific methods showing that there is similarity and correlation between certain meme stocks and that this increased since Jan.\n\nThe end unless you want to know the details:\n\n**Methods:** \n\n*Data pre-processing:*\n\nWe want to look at the patterns in the data and relative change rather than overall price movement, so we normalise the data to try and compare the datasets.\n\nData was taken a year to date from yesterday (6/3) and all stocks were normalised to the first day, so that the first day normalised prices was 100. The NASDEC ($IXIC) was also normalised the same way to the same day. To remove the background effect of the stock market\u2019s general movements, each dataseries was then divided by the normalised IXIC (day for day), and then renormalized back to 100 at the start of the data. The numbers get huge for GME due to it\u2019s huge price movement. \n\n*Time horizon:*\n\nThe data for the whole year to date was compared but more interesting results were seen if we split the data into pre and post January 1st. Data was daily price data, including, high, low, open, close, adjusted close and volume).\n\n*Correlation tests:*\n\nAfter normalisation, datasets were tested for how correlated they were using the Pearson R2 measure and corresponding p-value using SKlearn.\n\n*Clustering!*\n\nWe want to find similar patterns in the stock movements without assuming a. that we would see exact changes at the exact same time point and b, that the changes will be the same size. We cope with assumption a by using dynamic time warping distance metric (and b was the reason we did some of that normalisation). We use a machine learning clustering algorithm that can work with time-series data and compare the stonks using this dynamic time warping stuff. We test from 1 cluster up to 7 clusters using standard methods to determine which cluster is the best (inertia+elbow method and silhouette score), then we look at the clusters and see which stocks were put where. \n\n(see [https://github.com/tslearn-team/tslearn](https://github.com/tslearn-team/tslearn) [https://towardsdatascience.com/how-to-apply-k-means-clustering-to-time-series-data-28d04a8f7da3](https://towardsdatascience.com/how-to-apply-k-means-clustering-to-time-series-data-28d04a8f7da3))\n\nWe do all this with each of the data dimensions (i.e. high, low, open, close, adjusted close and volume) and also with ALL OF THEM. And get pretty much the same results, btw, only LOW data is covered in this write up.\n\n**Appendix:**\n\nComparing GME, AMC  \nBefore: Pearson r: -0.73 and p-value: 1.1e-25  \nAfter: Pearson r: 0.83 and p-value: 7.6e-27\n\nComparing GME, KOSS  \nBefore: Pearson r: 0.55 and p-value: 2.8e-13  \nAfter: Pearson r: 0.77 and p-value: 1.1e-21\n\nComparing GME, NAKD  \nBefore: Pearson r: -0.68 and p-value: 3.2e-21  \nAfter: Pearson r: 0.043 and p-value: 0.66\n\nComparing GME, NOKK  \nBefore: Pearson r: -0.87 and p-value: 1e-47  \nAfter: Pearson r: 0.39 and p-value: 3.9e-05\n\nComparing GME, BBBY  \nBefore: Pearson r: 0.8 and p-value: 1.9e-34  \nAfter: Pearson r: 0.53 and p-value: 7.3e-09\n\nComparing GME, VIX  \nBefore: Pearson r: -0.42 and p-value: 1.5e-07  \nAfter: Pearson r: -0.3 and p-value: 0.0022 \n\nComparing IBM, AMZN  \nBefore r: 0.25 and p-value: 0.0024  \nAfter Pearson r: 0.15 and p-value: 0.12  \n\n\nComparing IBM, CVS  \nBefore r: 0.75 and p-value: 4.8e-28  \nAfter Pearson r: 0.83 and p-value: 6.9e-28  \nComparing IBM, GSK  \nBefore r: 0.94 and p-value: 5.8e-72  \nAfter Pearson r: 0.62 and p-value: 2.4e-12  \nComparing IBM, RDS  \nBefore r: 0.64 and p-value: 3.1e-18  \nAfter Pearson r: 0.16 and p-value: 0.11  \nComparing IBM, WEN  \nBefore r: 0.82 and p-value: 1.2e-36  \nAfter Pearson r: 0.85 and p-value: 5.8e-30  \nComparing IBM, GMBefore r: -0.6 and p-value: 9.9e-16  \nAfter Pearson r: 0.39 and p-value: 4.6e-05 \n\nIf people want, I can run the code to do this for the whole set of measurables and write it out to a .csv file?\n\nFinal disclaimer: I know fuck all about finance, but I know about data science and stats! Yay stats!",
    "title": "Yes, those patterns y'all keep posting are real! The similarity in meme stock price movement is statistically significant and differs significantly from a control group of boomer stocks (answer to u/HomeDepotHank69).",
    "upvote_ratio": 0.99,
    "url": "https://www.reddit.com/r/Superstonk/comments/ns8dhk/yes_those_patterns_yall_keep_posting_are_real_the/"
}